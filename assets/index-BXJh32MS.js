(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const t of c.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&u(t)}).observe(document,{childList:!0,subtree:!0});function L(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(n){if(n.ep)return;n.ep=!0;const c=L(n);fetch(n.href,c)}})();document.addEventListener("DOMContentLoaded",function(){console.log("main.js is start");const y=document.querySelector("#theme-toggle");localStorage.getItem("theme"),y==null||y.addEventListener("click",()=>{document.documentElement.getAttribute("data-theme")==="dark"?(document.documentElement.removeAttribute("data-theme"),localStorage.setItem("theme","light"),y.classList.remove("dark")):(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark"),y.classList.add("dark"))}),typeof WOW<"u"?new WOW({boxClass:"wow",animateClass:"animated",offset:50,mobile:!0}).init():console.warn("WOW.js не загружен");const v=document.querySelector('p[data-translate="address"]');if(v&&typeof eruda<"u"){let e=!1;v.addEventListener("click",()=>{try{e?(eruda.destroy(),e=!1):(eruda.init(),e=!0)}catch(o){console.error("Ошибка при работе с Eruda:",o)}})}document.querySelectorAll('img[loading="lazy"]').forEach(e=>{e.complete?e.classList.add("loaded"):e.addEventListener("load",()=>{e.classList.add("loaded")})}),document.querySelectorAll('iframe[loading="lazy"]').forEach(e=>{e.complete?e.classList.add("loaded"):e.addEventListener("load",()=>{e.classList.add("loaded")})});const L=document.querySelector(".mobile-menu-btn"),u=document.querySelector(".main-nav"),n=document.querySelector(".sticky-header");document.getElementById("date");const c=document.querySelectorAll('a[href^="#"]');if(L&&u){let e=function(){const r=L.getAttribute("aria-expanded")==="true";L.setAttribute("aria-expanded",!r),u.classList.toggle("active"),document.body.classList.toggle("no-scroll")},o=function(){u.classList.contains("active")&&(u.classList.remove("active"),L.setAttribute("aria-expanded","false"),document.body.classList.remove("no-scroll"))};var X=e,R=o;L.addEventListener("click",e),document.addEventListener("click",r=>{!r.target.closest(".main-nav")&&!r.target.closest(".mobile-menu-btn")&&o()})}function t(e){const o=document.querySelector(e);if(o){const r=n?n.offsetHeight:0,h=o.getBoundingClientRect().top+window.pageYOffset-r;window.scrollTo({top:h,behavior:"smooth"})}}function s(e,o){let r;return function(...h){clearTimeout(r),r=setTimeout(()=>e.apply(this,h),o)}}c.length>0&&c.forEach(e=>{e.addEventListener("click",function(o){o.preventDefault();const r=this.getAttribute("href");r&&r!=="#"&&(t(r),this.classList.contains("nav-link")&&R())})});let l=0;window.addEventListener("scroll",s(()=>{const e=window.pageYOffset;if(n){if(e<=0){n.style.boxShadow="none";return}e>l&&e>100?n.style.transform="translateY(-100%)":(n.style.transform="translateY(0)",n.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.1)"),l=e}},50));const p=document.querySelectorAll(".feature-card");if(p.length>0){const e=new IntersectionObserver(o=>{o.forEach(r=>{r.isIntersecting&&(r.target.style.transform="translateY(0)",e.unobserve(r.target))})},{threshold:.1});p.forEach(o=>{o.style.transform="translateY(20px)",e.observe(o),o.addEventListener("mouseenter",()=>{o.style.transform="translateY(-10px)"}),o.addEventListener("mouseleave",()=>{o.style.transform="translateY(0)"})})}if(document.querySelectorAll(".dropdown"),document.body.classList.contains("page-about")){const e=document.querySelector(".theme-switcher"),o=document.querySelectorAll(".theme-btn"),r=document.body,h=localStorage.getItem("theme"),q=window.matchMedia("(prefers-color-scheme: dark)").matches,S=h||(q?"dark":"light");r.setAttribute("data-theme",S),e.setAttribute("data-theme",S),o.forEach(a=>{a.classList.toggle("active",a.getAttribute("data-theme")===S)}),o.forEach(a=>{a.addEventListener("click",()=>{const i=a.getAttribute("data-theme");r.setAttribute("data-theme",i),e.setAttribute("data-theme",i),o.forEach(f=>f.classList.remove("active")),a.classList.add("active"),localStorage.setItem("theme",i)})});const b=document.querySelector(".teacher-cards-wrapper"),O=document.querySelector(".left-btn"),I=document.querySelector(".right-btn"),A=document.querySelectorAll(".teacher-card");if(b&&A.length>0&&O&&I){const a=A[0].offsetWidth+20;let i=0;O.addEventListener("click",()=>{i>0&&(i-=a,b.style.transform=`translateX(-${i}px)`)}),I.addEventListener("click",()=>{i<(A.length-4)*a&&(i+=a,b.style.transform=`translateX(-${i}px)`)}),b.querySelectorAll(".bio-toggle-btn").forEach(f=>{f.addEventListener("click",()=>{const E=f.closest(".teacher-card");E.classList.toggle("open"),f.textContent=E.classList.contains("open")?"Скрыть":"Подробнее"})})}const W=document.querySelectorAll(".faq-item");W&&W.forEach(a=>{a.querySelector(".faq-question").addEventListener("click",()=>{W.forEach(f=>{f!==a&&f.classList.remove("active")}),a.classList.toggle("active")})});const d=document.getElementById("galleryRow"),D=document.getElementById("galleryPrev"),N=document.getElementById("galleryNext");if(d&&N&&D){let C=function(){a&&d.getBoundingClientRect().top<window.innerHeight&&(d.scrollLeft+=i,d.scrollLeft+d.clientWidth>=d.scrollWidth&&(d.scrollLeft=0)),requestAnimationFrame(C)},w=function(){a=!1,clearTimeout(f),f=setTimeout(()=>{a=!0},4e3)},z=function(g){const x=document.getElementById("lightbox"),Y=document.getElementById("lightbox-img");Y.src=g.src,x.style.display="flex",E=Array.from(document.querySelectorAll(".gallery-card img")).indexOf(g)},P=function(){const g=document.getElementById("lightbox");g.style.display="none"},T=function(g){const x=document.querySelectorAll(".gallery-card img");E=(E+g+x.length)%x.length;const Y=document.getElementById("lightbox-img");Y.src=x[E].src};var F=C,V=w,$=z,U=P,K=T;let a=!0,i=.5,f,E=0;requestAnimationFrame(C),D.addEventListener("click",()=>{d.scrollBy({left:-300,behavior:"smooth"}),w()}),N.addEventListener("click",()=>{d.scrollBy({left:300,behavior:"smooth"}),w()}),document.querySelectorAll(".gallery-card img").forEach(g=>{g.addEventListener("click",()=>z(g))}),d.addEventListener("mousedown",w),d.addEventListener("touchstart",w),d.addEventListener("wheel",w),document.querySelector(".lightbox-close").addEventListener("click",P);const M=document.getElementById("lightbox");M&&M.addEventListener("click",g=>{g.target===M&&P()}),document.querySelector(".lightbox-nav.left").addEventListener("click",()=>T(-1)),document.querySelector(".lightbox-nav.right").addEventListener("click",()=>T(1))}}if(document.body.classList.contains("page-index")){let S=function(){e.style.display="none",o.style.display="block",h.play(),q=!0},b=function(){h&&q&&typeof h.pause=="function"&&h.pause()};var _=S,G=b;const e=document.getElementById("myVideo-placeholder"),o=document.getElementById("plyr-container"),r=document.querySelector(".video-play-button");let h=new Plyr("#player",{controls:["play","progress","duration","mute","volume","fullscreen"],youtube:{noCookie:!0}}),q=!1;r&&e&&r.addEventListener("click",S),new IntersectionObserver(I=>{I.forEach(A=>{!A.isIntersecting&&q&&b()})},{threshold:.1}).observe(o)}"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{if(!(await fetch("./sw.js")).ok){console.warn("Файл ServiceWorker не найден");return}const o=await navigator.serviceWorker.register("/sw.js");console.log("ServiceWorker зарегистрирован:",o.scope)}catch(e){console.error("Ошибка регистрации ServiceWorker:",e)}});const m=document.querySelectorAll(".video-card"),k=document.getElementById("videoModal"),j=document.getElementById("videoPlayer"),H=document.querySelector(".modal-close");m.forEach(e=>{e.addEventListener("click",()=>{try{const o=e.getAttribute("data-video");j.src=o,k.classList.add("show"),document.body.classList.add("no-scroll")}catch{}})});function B(){k.classList.remove("show"),j.src="",document.body.classList.remove("no-scroll")}H.addEventListener("click",B),k.addEventListener("click",e=>{e.target===k&&B()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&k.classList.contains("show")&&B()})});document.addEventListener("DOMContentLoaded",function(){let y={};fetch("../data/translations.json").then(t=>t.json()).then(t=>{y=t,n()}).catch(t=>{console.error("Ошибка загрузки translations.json",t)});function v(t,s){const l=y[t];return l?l[s]||l.ru||t:(console.warn(`❗ Отсутствует перевод для ключа: "${t}"`),t)}function L(t,s,l){const p=t.dataset.translateType||"text",m=v(s,l);switch(p){case"html":t.innerHTML=m;break;case"placeholder":t.placeholder=m;break;case"value":t.value=m;break;case"title":t.title=m;break;case"alt":t.alt=m;break;default:t.textContent=m}}function u(t){document.querySelectorAll("[data-translate]").forEach(s=>{const l=s.dataset.translate;L(s,l,t)}),document.documentElement.lang=t}function n(){const t=localStorage.getItem("selectedLang"),s=navigator.language.slice(0,2),l=["ru","uz"].includes(s)?s:"ru",p=t||l;u(p),c(p)}function c(t){document.querySelectorAll(".lang-btn").forEach(l=>{const m=l.getAttribute("data-lang")===t;l.classList.toggle("active",m),l.setAttribute("aria-pressed",m.toString())});const s=document.querySelector(".lang-slider");s&&(s.style.transform=t==="uz"?"translateX(100%)":"translateX(0)")}document.querySelectorAll(".lang-btn").forEach(t=>{t.addEventListener("click",function(){const s=this.getAttribute("data-lang");localStorage.setItem("selectedLang",s),u(s),c(s)})}),n(),window.getTranslation=v,window.translatePage=u,window.initLanguage=n});
